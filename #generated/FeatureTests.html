<!DOCTYPE html>

<!-- Note: This file has been generated by TableGenerator and should not be edited manually. -->
<html>
  <head>
    <title>Dependency Injection Feature Tests (.NET)</title>
    <link rel='stylesheet' href='FeatureTests.css' />
  </head>
  <body>
    <div class='note-firefox'>Note: CSS used in this file is not supported by Firefox due to <a href='https://bugzilla.mozilla.org/show_bug.cgi?id=35168'>Bug 35168</a> (13 years, really?).</div>
    
    <div class="content">
      <h1>Dependency Injection Feature Tests (.NET)</h1>

      <section>
        <h2>Essential functionality</h2>
        <div class="description"></div>
        


        <table>
          <tr>
            <th>Framework</th>
              <th>Register/resolve independent service</th>
              <th>Register/resolve independent service registered as itself</th>
              <th>Singleton lifetime</th>
              <th>Transient lifetime</th>
              <th>Register/resolve instance</th>
              <th>Resolve constructor dependency</th>
              <th>Resolve constructor dependency using instance</th>
          </tr>
          <tr>
            <td>Autofac</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Castle</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>LinFu</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Ninject</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>StructureMap</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Spring</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Unity</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
        </table>
      </section>
      <section>
        <h2>List/array dependencies</h2>
        <div class="description">When several registrations of IService exist in a container, many frameworks automatically provide TService[] (or List&lt;TService&gt; etc).

This is extremely important for open/closed principle. For example, UserValidator can have dependency on IUserValidationRule[]. Then new rules can be transparently added to the system without any changes to UserValidator.</div>
        


        <table>
          <tr>
            <th>Framework</th>
              <th>Constructor dependency</th>
              <th>Property dependency</th>
          </tr>
          <tr>
            <td>Autofac</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Castle</td>
                <td class="failure with-comment">failed<div class="comment">Can&#39;t create component &#39;DependencyInjection.FeatureTests.TestTypes.ServiceWithArrayConstructorDependency&#39; as it has dependencies to be satisfied.

&#39;DependencyInjection.FeatureTests.TestTypes.ServiceWithArrayConstructorDependency&#39; is waiting for the following dependencies:
- Service &#39;DependencyInjection.FeatureTests.TestTypes.IService[]&#39; which was not registered.
</div></td>
                <td class="failure with-comment">failed<div class="comment">Assert.NotNull() Failure</div></td>
          </tr>
          <tr>
            <td>LinFu</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Ninject</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>StructureMap</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Spring</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">Assert.NotNull() Failure</div></td>
          </tr>
          <tr>
            <td>Unity</td>
                <td class="failure with-comment">failed<div class="comment">Assert.Equal() Failure
Expected: 1
Actual:   0</div></td>
                <td class="failure with-comment">failed<div class="comment">Assert.Equal() Failure
Expected: 1
Actual:   0</div></td>
          </tr>
        </table>
      </section>
      <section>
        <h2>Generics support</h2>
        <div class="description"></div>
        

          <dl>
              <dt>Open generic registration</dt>
              <dd>Allows registration of open generic types.

For example Service&lt;&gt; can be registered as IService&lt;&gt;. Then any request for IService&lt;T&gt; should be resolved with Service&lt;T&gt;.</dd>
          </dl>

        <table>
          <tr>
            <th>Framework</th>
              <th>Open generic registration</th>
          </tr>
          <tr>
            <td>Autofac</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Castle</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>LinFu</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Ninject</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>StructureMap</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Spring</td>
                <td class="failure with-comment">failed<div class="comment">Sequence contains no elements</div></td>
          </tr>
          <tr>
            <td>Unity</td>
                <td class="success">supported</td>
          </tr>
        </table>
      </section>
      <section>
        <h2>Automatic factories (Func&lt;TService&gt;)</h2>
        <div class="description">When TService is registered in a container, many frameworks automatically provide Func&lt;..., TService&gt;.

This is very useful for mixing lifetimes: for example, singleton (Service) may have a Func dependency on transient (DataContext), which allows it to get/dispose a new instance of transient when it is needed.</div>
        

          <dl>
              <dt>No parameters</dt>
              <dd>Registration of TService automatically provides Func&lt;TService&gt;.</dd>
              <dt>Parameter for dependency</dt>
              <dd>Registration of TService automatically provides Func&lt;..., TService&gt;, where any arguments to the factory define constructor parameter overrides.

For example, registration Service(IService1, IService2) can provide Func&lt;IService2, Service&gt; or Func&lt;IService1, Service&gt; or Func&lt;IService1, Service2, Service&gt;. Remaining parameters are provided by the container.</dd>
              <dt>Singleton using transient</dt>
              <dd>When TService is transient and Func&lt;TService&gt; was obtained by singleton, Func should return new instance on each call.</dd>
          </dl>

        <table>
          <tr>
            <th>Framework</th>
              <th>No parameters</th>
              <th>Parameter for dependency</th>
              <th>Singleton using transient</th>
          </tr>
          <tr>
            <td>Autofac</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Castle</td>
                <td class="failure with-comment">failed<div class="comment">No component for supporting the service System.Func`1[[DependencyInjection.FeatureTests.TestTypes.ServiceWithSimpleConstructorDependency, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] was found</div></td>
                <td class="failure with-comment">failed<div class="comment">No component for supporting the service System.Func`2[[DependencyInjection.FeatureTests.TestTypes.IService2, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[DependencyInjection.FeatureTests.TestTypes.ServiceWithTwoConstructorDependencies, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] was found</div></td>
                <td class="failure with-comment">failed<div class="comment">Can&#39;t create component &#39;DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency&#39; as it has dependencies to be satisfied.

&#39;DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency&#39; is waiting for the following dependencies:
- Service &#39;System.Func`1[[DependencyInjection.FeatureTests.TestTypes.IService, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&#39; which was not registered.
</div></td>
          </tr>
          <tr>
            <td>LinFu</td>
                <td class="failure with-comment">failed<div class="comment">Service type &#39;System.Func`1[[DependencyInjection.FeatureTests.TestTypes.ServiceWithSimpleConstructorDependency, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&#39; not found</div></td>
                <td class="failure with-comment">failed<div class="comment">Service type &#39;System.Func`2[[DependencyInjection.FeatureTests.TestTypes.IService2, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[DependencyInjection.FeatureTests.TestTypes.ServiceWithTwoConstructorDependencies, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&#39; not found</div></td>
                <td class="failure with-comment">failed<div class="comment">Constructor on type &#39;DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency&#39; not found.</div></td>
          </tr>
          <tr>
            <td>Ninject</td>
                <td class="neutral with-comment">see comment<div class="comment">Ninject supports this through Ninject.Extensions.Factory, but attempts to install it from NuGet clash with Castle version.</div></td>
                <td class="neutral with-comment">see comment<div class="comment">Ninject supports this through Ninject.Extensions.Factory, but attempts to install it from NuGet clash with Castle version.</div></td>
                <td class="neutral with-comment">see comment<div class="comment">Ninject supports this through Ninject.Extensions.Factory, but attempts to install it from NuGet clash with Castle version.</div></td>
          </tr>
          <tr>
            <td>StructureMap</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">StructureMap Exception Code:  202
No Default Instance defined for PluginFamily System.Func`2[[DependencyInjection.FeatureTests.TestTypes.IService2, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[DependencyInjection.FeatureTests.TestTypes.ServiceWithTwoConstructorDependencies, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</div></td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Spring</td>
                <td class="failure with-comment">failed<div class="comment">Sequence contains no elements</div></td>
                <td class="failure with-comment">failed<div class="comment">Sequence contains no elements</div></td>
                <td class="failure with-comment">failed<div class="comment">Error creating object with name &#39;DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency (DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency)&#39; : Unsatisfied dependency expressed through constructor argument with index 0 of type [System.Func`1[DependencyInjection.FeatureTests.TestTypes.IService]] : No unique object of type [System.Func`1[[DependencyInjection.FeatureTests.TestTypes.IService, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]] is defined : Unsatisfied dependency of type [System.Func`1[DependencyInjection.FeatureTests.TestTypes.IService]]: expected at least 1 matching object to wire the [factory] parameter on the constructor of object [DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency (DependencyInjection.FeatureTests.TestTypes.ServiceWithFuncConstructorDependency)]</div></td>
          </tr>
          <tr>
            <td>Unity</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">Resolution of the dependency failed, type = &quot;System.Func`2[DependencyInjection.FeatureTests.TestTypes.IService2,DependencyInjection.FeatureTests.TestTypes.ServiceWithTwoConstructorDependencies]&quot;, name = &quot;(none)&quot;.
Exception occurred while: while resolving.
Exception is: VerificationException - Operation could destabilize the runtime.
-----------------------------------------------
At the time of the exception, the container was:

  Resolving System.Func`2[DependencyInjection.FeatureTests.TestTypes.IService2,DependencyInjection.FeatureTests.TestTypes.ServiceWithTwoConstructorDependencies],(none)
</div></td>
                <td class="success">supported</td>
          </tr>
        </table>
      </section>
      <section>
        <h2>Property dependencies</h2>
        <div class="description"></div>
        


        <table>
          <tr>
            <th>Framework</th>
              <th>Simple dependency</th>
              <th>Optional by default</th>
          </tr>
          <tr>
            <td>Autofac</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Castle</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>LinFu</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Ninject</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">Error activating IService
No matching bindings are available, and the type is not self-bindable.
Activation path:
  2) Injection of dependency IService into property Service of type ServiceWithSimplePropertyDependency
  1) Request for ServiceWithSimplePropertyDependency

Suggestions:
  1) Ensure that you have defined a binding for IService.
  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
  3) Ensure you have not accidentally created more than one kernel.
  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
  5) If you are using automatic module loading, ensure the search path and filters are correct.
</div></td>
          </tr>
          <tr>
            <td>StructureMap</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">StructureMap Exception Code:  202
No Default Instance defined for PluginFamily DependencyInjection.FeatureTests.TestTypes.IService, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</div></td>
          </tr>
          <tr>
            <td>Spring</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Unity</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">Resolution of the dependency failed, type = &quot;DependencyInjection.FeatureTests.TestTypes.ServiceWithSimplePropertyDependency&quot;, name = &quot;(none)&quot;.
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type, DependencyInjection.FeatureTests.TestTypes.IService, is an interface and cannot be constructed. Are you missing a type mapping?
-----------------------------------------------
At the time of the exception, the container was:

  Resolving DependencyInjection.FeatureTests.TestTypes.ServiceWithSimplePropertyDependency,(none)
  Resolving value for property ServiceWithSimplePropertyDependency.Service
    Resolving DependencyInjection.FeatureTests.TestTypes.IService,(none)
</div></td>
          </tr>
        </table>
      </section>
      <section>
        <h2>Convenience</h2>
        <div class="description">Features that simplify development and reduce surprises.</div>
        

          <dl>
              <dt>Best constructor selection</dt>
              <dd>If multiple constructors are present, DI framework should select the one that developer would have selected, having the same services. In this situation, it seems reasonable to select constructor with most resolvable dependencies.</dd>
              <dt>Graceful recursion handling</dt>
              <dd>Recursive dependencies are non-resolvable, however the difference between getting a StackOverflowException and any other one is significant.

StackOverflowException will crash the whole process, which is really undesirable, even if it is only an integration test environment. Debugging such issue can be a huge annoyance.</dd>
          </dl>

        <table>
          <tr>
            <th>Framework</th>
              <th>Best constructor selection</th>
              <th>Graceful recursion handling</th>
              <th>Graceful recursion handling (list dependency)</th>
          </tr>
          <tr>
            <td>Autofac</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="failure with-comment">failed<div class="comment">Autofac fails list recursion for now, and we have no way to retest it in each run (without process crash).</div></td>
          </tr>
          <tr>
            <td>Castle</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>LinFu</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Ninject</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>StructureMap</td>
                <td class="failure with-comment">failed<div class="comment">StructureMap Exception Code:  202
No Default Instance defined for PluginFamily DependencyInjection.FeatureTests.TestTypes.IUnregisteredService, DependencyInjection.FeatureTests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</div></td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Spring</td>
                <td class="failure with-comment">failed<div class="comment">Assert.Equal() Failure
Position: First difference is at position 0
Expected: Most resolvable
Actual:   Default</div></td>
                <td class="success">supported</td>
                <td class="success">supported</td>
          </tr>
          <tr>
            <td>Unity</td>
                <td class="failure with-comment">failed<div class="comment">Resolution of the dependency failed, type = &quot;DependencyInjection.FeatureTests.TestTypes.ServiceWithMultipleConstructors&quot;, name = &quot;(none)&quot;.
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type, DependencyInjection.FeatureTests.TestTypes.IUnregisteredService, is an interface and cannot be constructed. Are you missing a type mapping?
-----------------------------------------------
At the time of the exception, the container was:

  Resolving DependencyInjection.FeatureTests.TestTypes.ServiceWithMultipleConstructors,(none)
  Resolving parameter &quot;service2&quot; of constructor DependencyInjection.FeatureTests.TestTypes.ServiceWithMultipleConstructors(DependencyInjection.FeatureTests.TestTypes.IService service1, DependencyInjection.FeatureTests.TestTypes.IUnregisteredService service2)
    Resolving DependencyInjection.FeatureTests.TestTypes.IUnregisteredService,(none)
</div></td>
                <td class="failure with-comment">failed<div class="comment">Unity fails recursion for now, and we have no way to retest it in each run (without process crash).</div></td>
                <td class="failure with-comment">failed<div class="comment">Unity fails recursion for now, and we have no way to retest it in each run (without process crash).</div></td>
          </tr>
        </table>
      </section>
    </div>
  </body>
</html>